# üé® Guia de Modifica√ß√µes de UI - Humana Companions

## üìã Vis√£o Geral

Este documento estabelece regras e padr√µes espec√≠ficos para modifica√ß√µes de interface, componentes e controles, visando evitar que altera√ß√µes quebrem o c√≥digo existente ou introduzam inconsist√™ncias.

## üéØ Problemas Comuns e Solu√ß√µes

### ‚ùå **Problema: IA "se perde" em modifica√ß√µes complexas**
- **Causa**: Falta de contexto espec√≠fico sobre a estrutura dos componentes
- **Solu√ß√£o**: Sempre fornecer o mapeamento completo da estrutura antes da modifica√ß√£o

### ‚ùå **Problema: C√≥digo quebrado ap√≥s altera√ß√µes**
- **Causa**: Modifica√ß√£o de depend√™ncias sem atualizar importa√ß√µes
- **Solu√ß√£o**: Checklist de verifica√ß√£o p√≥s-modifica√ß√£o obrigat√≥rio

### ‚ùå **Problema: Inconsist√™ncias visuais**
- **Causa**: N√£o seguir os padr√µes estabelecidos do design system
- **Solu√ß√£o**: Templates e padr√µes documentados para cada tipo de componente

## üèóÔ∏è Estrutura de Componentes - Mapa de Refer√™ncia

### **üì± Componentes de Layout Principal**
```
app/
‚îú‚îÄ‚îÄ layout.tsx                 # Layout raiz da aplica√ß√£o
‚îú‚îÄ‚îÄ (chat)/
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx            # Layout espec√≠fico do chat
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # P√°gina principal do chat
‚îî‚îÄ‚îÄ (auth)/
    ‚îú‚îÄ‚îÄ login/page.tsx        # P√°gina de login
    ‚îî‚îÄ‚îÄ register/page.tsx     # P√°gina de registro

components/
‚îú‚îÄ‚îÄ app-sidebar.tsx           # Sidebar principal com navega√ß√£o
‚îú‚îÄ‚îÄ chat-header.tsx           # Header do chat com controles
‚îú‚îÄ‚îÄ chat.tsx                  # Componente principal do chat
‚îú‚îÄ‚îÄ multimodal-input.tsx      # Input principal do chat
‚îú‚îÄ‚îÄ messages.tsx              # Container de mensagens
‚îú‚îÄ‚îÄ message.tsx               # Componente individual de mensagem
‚îî‚îÄ‚îÄ ui/                       # Componentes base do shadcn/ui
    ‚îú‚îÄ‚îÄ button.tsx
    ‚îú‚îÄ‚îÄ input.tsx
    ‚îú‚îÄ‚îÄ dropdown-menu.tsx
    ‚îî‚îÄ‚îÄ ...
```

### **üé® Componentes de Artifacts**
```
components/
‚îú‚îÄ‚îÄ artifact.tsx              # Container principal dos artifacts
‚îú‚îÄ‚îÄ artifact-actions.tsx      # A√ß√µes dos artifacts (copy, download, etc.)
‚îú‚îÄ‚îÄ artifact-close-button.tsx # Bot√£o de fechar artifact
‚îî‚îÄ‚îÄ artifact-messages.tsx     # Mensagens relacionadas aos artifacts

artifacts/
‚îú‚îÄ‚îÄ text/client.tsx           # Editor de texto
‚îú‚îÄ‚îÄ code/client.tsx           # Editor de c√≥digo
‚îú‚îÄ‚îÄ image/client.tsx          # Visualizador de imagem
‚îî‚îÄ‚îÄ sheet/client.tsx          # Editor de planilha
```

## üìê Regras de Modifica√ß√£o por Tipo

### **üîß 1. Modifica√ß√µes no Input de Chat**

#### **Localiza√ß√£o**: `components/multimodal-input.tsx`

#### **‚ö†Ô∏è ATEN√á√ÉO CR√çTICA**:
- **NUNCA** altere a estrutura base do formul√°rio sem verificar as depend√™ncias
- **SEMPRE** mantenha os event handlers existentes
- **SEMPRE** preserve as props necess√°rias para o funcionamento

#### **‚úÖ Padr√£o para Adicionar Controles**:
```typescript
// ANTES de modificar, identifique a estrutura:
// 1. Container principal (form)
// 2. √Årea de input (textarea + bot√µes)
// 3. √Årea de controles (bot√µes de a√ß√£o)
// 4. √Årea de anexos (file uploads)

// EXEMPLO: Adicionando um novo bot√£o
const ExistingStructure = () => (
  <form>
    <div className="input-area">
      <Textarea />
      <div className="controls-area">
        {/* ADICIONE NOVOS CONTROLES AQUI */}
        <NewButton onClick={handleNewAction} />
        {/* N√ÉO REMOVA OS CONTROLES EXISTENTES */}
        <ExistingButton />
      </div>
    </div>
  </form>
);
```

#### **üîç Checklist Pr√©-Modifica√ß√£o**:
- [ ] Identifiquei todos os event handlers existentes?
- [ ] Verifiquei quais props s√£o passadas pelo componente pai?
- [ ] Mapeei todos os estados (loading, disabled, etc.)?
- [ ] Identifiquei as depend√™ncias de outros componentes?

### **üîß 2. Modifica√ß√µes na Sidebar**

#### **Localiza√ß√£o**: `components/app-sidebar.tsx`

#### **‚úÖ Estrutura Padr√£o**:
```typescript
// ESTRUTURA FIXA - N√ÉO ALTERAR:
<Sidebar>
  <SidebarHeader>
    {/* Logo e controles principais */}
  </SidebarHeader>
  
  <SidebarContent>
    {/* √ÅREA SEGURA PARA MODIFICA√á√ïES */}
    <SidebarGroup>
      <SidebarGroupLabel>Navega√ß√£o</SidebarGroupLabel>
      <SidebarGroupContent>
        {/* ADICIONE NOVOS ITENS AQUI */}
      </SidebarGroupContent>
    </SidebarGroup>
  </SidebarContent>
  
  <SidebarFooter>
    {/* User nav - CUIDADO AO MODIFICAR */}
  </SidebarFooter>
</Sidebar>
```

### **üîß 3. Modifica√ß√µes no Header do Chat**

#### **Localiza√ß√£o**: `components/chat-header.tsx`

#### **‚úÖ √Åreas de Modifica√ß√£o Segura**:
```typescript
// ESTRUTURA IDENTIFICADA:
<header className="flex items-center justify-between">
  <div className="flex items-center gap-2">
    {/* √ÅREA 1: Controles √† esquerda */}
    <SidebarToggle />
    {/* ADICIONE NOVOS CONTROLES AQUI */}
  </div>
  
  <div className="flex items-center gap-2">
    {/* √ÅREA 2: Controles centrais */}
    <ModelSelector />
    <VisibilitySelector />
    {/* ADICIONE NOVOS SELETORES AQUI */}
  </div>
  
  <div className="flex items-center gap-2">
    {/* √ÅREA 3: Controles √† direita */}
    {/* ADICIONE A√á√ïES AQUI */}
  </div>
</header>
```

## üé® Padr√µes de Design System

### **üéØ Componentes Base (shadcn/ui)**

#### **‚úÖ SEMPRE Use os Componentes Base**:
```typescript
// ‚úÖ CORRETO - Usando componentes do design system
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { DropdownMenu } from "@/components/ui/dropdown-menu"

// ‚ùå ERRADO - Criando elementos HTML diretamente
<button className="custom-button">Click me</button>
```

#### **üé® Padr√µes de Cores e Estilos**:
```typescript
// ‚úÖ CLASSES APROVADAS para novos componentes:
const approvedClasses = {
  // Bot√µes
  primary: "bg-primary text-primary-foreground hover:bg-primary/90",
  secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
  ghost: "hover:bg-accent hover:text-accent-foreground",
  
  // Inputs
  input: "border border-input bg-background ring-offset-background",
  
  // Containers
  card: "border bg-card text-card-foreground shadow-sm",
  
  // Estados
  disabled: "disabled:pointer-events-none disabled:opacity-50",
  loading: "animate-pulse"
};
```

### **üìè Padr√µes de Spacing e Layout**:
```typescript
// ‚úÖ SPACING PADR√ÉO - Use apenas estes valores:
const spacing = {
  xs: "gap-1",      // 4px
  sm: "gap-2",      // 8px
  md: "gap-4",      // 16px
  lg: "gap-6",      // 24px
  xl: "gap-8"       // 32px
};

// ‚úÖ PADDING/MARGIN PADR√ÉO:
const padding = {
  xs: "p-1",
  sm: "p-2", 
  md: "p-4",
  lg: "p-6",
  xl: "p-8"
};
```

## üîß Processo de Modifica√ß√£o Segura

### **üìã Checklist OBRIGAT√ìRIO Antes de Qualquer Modifica√ß√£o**

#### **1Ô∏è‚É£ An√°lise Pr√©-Modifica√ß√£o**
- [ ] **Mapeei a estrutura atual** do componente que vou modificar?
- [ ] **Identifiquei todas as props** que o componente recebe?
- [ ] **Verifiquei os event handlers** existentes?
- [ ] **Listei as depend√™ncias** (hooks, contexts, stores)?
- [ ] **Identifiquei os componentes filhos** que podem ser afetados?

#### **2Ô∏è‚É£ Planejamento da Modifica√ß√£o**
- [ ] **Defini exatamente onde** vou adicionar o novo c√≥digo?
- [ ] **Escolhi os componentes base** apropriados do design system?
- [ ] **Verifiquei se preciso** de novos imports?
- [ ] **Planejei como testar** a modifica√ß√£o?

#### **3Ô∏è‚É£ Execu√ß√£o Controlada**
- [ ] **Fiz backup** do c√≥digo original (coment√°rio ou arquivo)?
- [ ] **Adicionei apenas** o c√≥digo necess√°rio?
- [ ] **Mantive toda** a estrutura existente intacta?
- [ ] **Usei nomes descritivos** para novas vari√°veis/fun√ß√µes?

#### **4Ô∏è‚É£ Verifica√ß√£o P√≥s-Modifica√ß√£o**
- [ ] **Testei todas** as funcionalidades existentes?
- [ ] **Verifiquei se n√£o h√°** erros de TypeScript?
- [ ] **Confirmei que** o layout n√£o quebrou?
- [ ] **Testei em diferentes** tamanhos de tela?

## üö® Sinais de Alerta - Quando PARAR

### **üõë RED FLAGS - Pare Imediatamente Se:**
- Voc√™ est√° modificando mais de 50% do c√≥digo existente
- Precisa alterar m√∫ltiplos arquivos para uma simples adi√ß√£o
- Est√° removendo c√≥digo sem entender sua fun√ß√£o
- Os tipos TypeScript est√£o dando muitos erros
- A modifica√ß√£o afeta componentes n√£o relacionados

### **‚ö†Ô∏è YELLOW FLAGS - Proceda com Cautela Se:**
- Est√° adicionando muitas depend√™ncias novas
- O componente j√° est√° muito complexo (>200 linhas)
- Precisa alterar event handlers existentes
- Est√° modificando props que v√™m do componente pai

## üéØ Templates para Modifica√ß√µes Comuns

### **üìù Template: Adicionando Bot√£o no Input de Chat**

```typescript
// 1. LOCALIZE a √°rea de controles no multimodal-input.tsx
// 2. IDENTIFIQUE a estrutura existente:

const existingStructure = (
  <div className="flex items-center gap-2">
    {/* BOT√ïES EXISTENTES - N√ÉO ALTERAR */}
    <ExistingButton />
    
    {/* ‚úÖ ADICIONE SEU NOVO BOT√ÉO AQUI */}
    <Button
      variant="ghost"
      size="sm"
      onClick={handleNewAction}
      disabled={isLoading}
      className="shrink-0"
    >
      <NewIcon className="w-4 h-4" />
      <span className="sr-only">Nova A√ß√£o</span>
    </Button>
    {/* ‚úÖ FIM DA ADI√á√ÉO */}
  </div>
);

// 3. ADICIONE o handler correspondente:
const handleNewAction = useCallback(() => {
  // Sua l√≥gica aqui
}, [/* depend√™ncias */]);
```

### **üìù Template: Adicionando Item na Sidebar**

```typescript
// 1. LOCALIZE o SidebarContent em app-sidebar.tsx
// 2. ADICIONE dentro de um SidebarGroup existente ou crie novo:

<SidebarGroup>
  <SidebarGroupLabel>Sua Nova Se√ß√£o</SidebarGroupLabel>
  <SidebarGroupContent>
    <SidebarMenu>
      <SidebarMenuItem>
        <SidebarMenuButton asChild>
          <Link href="/nova-rota">
            <NewIcon className="w-4 h-4" />
            <span>Nova Funcionalidade</span>
          </Link>
        </SidebarMenuButton>
      </SidebarMenuItem>
    </SidebarMenu>
  </SidebarGroupContent>
</SidebarGroup>
```

### **üìù Template: Adicionando Dropdown no Header**

```typescript
// 1. LOCALIZE a √°rea apropriada no chat-header.tsx
// 2. USE o padr√£o DropdownMenu:

<DropdownMenu>
  <DropdownMenuTrigger asChild>
    <Button variant="ghost" size="sm">
      <NewIcon className="w-4 h-4" />
      <span className="sr-only">Abrir menu</span>
    </Button>
  </DropdownMenuTrigger>
  <DropdownMenuContent align="end">
    <DropdownMenuItem onClick={handleAction1}>
      <Icon1 className="w-4 h-4 mr-2" />
      A√ß√£o 1
    </DropdownMenuItem>
    <DropdownMenuItem onClick={handleAction2}>
      <Icon2 className="w-4 h-4 mr-2" />
      A√ß√£o 2
    </DropdownMenuItem>
  </DropdownMenuContent>
</DropdownMenu>
```

## üß™ Estrat√©gias de Teste R√°pido

### **‚ö° Teste Imediato Ap√≥s Modifica√ß√£o**
```bash
# 1. Verificar se compila
npm run build

# 2. Verificar tipos
npm run type-check

# 3. Executar em desenvolvimento
npm run dev
```

### **üîç Checklist de Teste Visual**
- [ ] Layout n√£o quebrou em desktop
- [ ] Layout n√£o quebrou em mobile
- [ ] Todos os bot√µes est√£o clic√°veis
- [ ] Tooltips/labels est√£o funcionando
- [ ] Estados de loading/disabled funcionam
- [ ] Navega√ß√£o entre telas ainda funciona

## üìö Recursos de Refer√™ncia R√°pida

### **üîó Links Importantes**
- [shadcn/ui Components](https://ui.shadcn.com/docs/components) - Componentes base
- [Tailwind CSS Classes](https://tailwindcss.com/docs) - Classes de estilo
- [Lucide Icons](https://lucide.dev/icons/) - √çcones padr√£o do projeto

### **üìñ Arquivos de Refer√™ncia Obrigat√≥ria**
- `components/ui/` - Todos os componentes base
- `lib/utils.ts` - Fun√ß√µes utilit√°rias
- `tailwind.config.ts` - Configura√ß√£o de estilos
- `components.json` - Configura√ß√£o do shadcn/ui

---

## üéØ Resumo das Regras de Ouro

1. **üîç SEMPRE** mapeie a estrutura antes de modificar
2. **‚úÖ SEMPRE** use componentes do design system
3. **‚ö†Ô∏è NUNCA** altere mais de 50% do c√≥digo existente
4. **üìã SEMPRE** siga o checklist de verifica√ß√£o
5. **üß™ SEMPRE** teste imediatamente ap√≥s modificar
6. **üìù SEMPRE** use os templates fornecidos
7. **üõë PARE** se encontrar red flags
8. **üìö SEMPRE** consulte a documenta√ß√£o de refer√™ncia

**üí° Lembre-se: √â melhor fazer m√∫ltiplas modifica√ß√µes pequenas e seguras do que uma grande modifica√ß√£o que quebra tudo!** üéØ‚ú® 