---
description: 
globs: 
alwaysApply: false
---
# Humana Companions - Sistema de Planejamento

## ğŸ“‹ VisÃ£o Geral
Esta regra define o uso do sistema de planejamento evolutivo para mudanÃ§as arquiteturais complexas. **SEMPRE planejar antes de implementar** mudanÃ§as significativas.

## ğŸš¨ Regra Fundamental

### NUNCA implemente diretamente se a mudanÃ§a:
- [ ] Afeta **mÃºltiplos mÃ³dulos** da aplicaÃ§Ã£o
- [ ] Introduz **novas dependÃªncias** externas  
- [ ] Modifica **padrÃµes arquiteturais** existentes
- [ ] Impacta **performance** ou **escalabilidade**
- [ ] Requer **migraÃ§Ã£o de dados** ou **breaking changes**
- [ ] Envolve **integraÃ§Ãµes complexas** (MCP, RAG, orquestradores)

### SEMPRE crie planejamento em `docs/planejamento/`

## ğŸ—‚ï¸ Estrutura de Planejamento

### Template ObrigatÃ³rio
```
ğŸ“ docs/planejamento/[nome-mudanca]/
â”œâ”€â”€ analise-impacto.md       # AnÃ¡lise completa de impacto
â”œâ”€â”€ arquitetura-proposta.md  # Arquitetura detalhada
â”œâ”€â”€ diagramas.md            # Diagramas C4 e fluxos
â”œâ”€â”€ implementacao-fases.md   # Fases de implementaÃ§Ã£o
â””â”€â”€ validacao-testes.md     # EstratÃ©gia de testes
```

## ğŸ“Š Planejamentos Atuais

### ğŸŸ¡ Em Andamento
- **MCP Integration** - Context-aware AI (Alta prioridade)
- **RAG Data Room** - Base de conhecimento (Alta prioridade)

### ğŸ“‹ Pendentes
- **UI Chat Generative (ReAct)** - Interface com raciocÃ­nio
- **Agentes Companions** - Sistema de companions
- **Novas Telas** - Designer interfaces
- **Apps Internos** - Apps plugÃ¡veis
- **Marketplace Companions** - Marketplace de companions

## ğŸ¯ Processo de Planejamento

### Fase 1: AnÃ¡lise de Impacto (OBRIGATÃ“RIA)
```markdown
# AnÃ¡lise de Impacto - [Nome da MudanÃ§a]

## Contexto Atual
- Estado atual do sistema
- LimitaÃ§Ãµes identificadas
- MotivaÃ§Ã£o para mudanÃ§a

## Componentes Afetados
- [ ] Frontend (React/Next.js)
- [ ] Backend (API Routes)
- [ ] Banco de dados (Schema)
- [ ] IntegraÃ§Ãµes externas
- [ ] Sistema de autenticaÃ§Ã£o
- [ ] Sistema de artifacts
- [ ] Agentes Dify

## Riscos Identificados
- Riscos tÃ©cnicos
- Riscos de performance
- Riscos de seguranÃ§a
- Riscos de UX

## CritÃ©rios de Sucesso
- MÃ©tricas funcionais
- MÃ©tricas de performance
- MÃ©tricas de qualidade
```

### Fase 2: Arquitetura Proposta (OBRIGATÃ“RIA)
```markdown
# Arquitetura Proposta - [Nome da MudanÃ§a]

## DecisÃµes Arquiteturais
1. **Tecnologias escolhidas** e justificativa
2. **PadrÃµes de integraÃ§Ã£o** a seguir
3. **Estrutura de dados** necessÃ¡ria
4. **APIs e endpoints** a criar

## Alternativas Consideradas
- OpÃ§Ã£o A: PrÃ³s e contras
- OpÃ§Ã£o B: PrÃ³s e contras
- **OpÃ§Ã£o escolhida**: Justificativa detalhada
```

### Fase 3: ImplementaÃ§Ã£o em Fases (OBRIGATÃ“RIA)
```markdown
# ImplementaÃ§Ã£o em Fases - [Nome da MudanÃ§a]

## Fase 1: FundaÃ§Ã£o (Semana 1-2)
- [ ] Setup inicial
- [ ] Estrutura bÃ¡sica
- [ ] Proof of concept

## Fase 2: Core Features (Semana 3-4)
- [ ] Funcionalidades principais
- [ ] IntegraÃ§Ãµes bÃ¡sicas
- [ ] Testes unitÃ¡rios

## Fase 3: IntegraÃ§Ã£o (Semana 5-6)
- [ ] IntegraÃ§Ã£o com sistema existente
- [ ] Testes de integraÃ§Ã£o
- [ ] Performance tuning

## Fase 4: Polimento (Semana 7-8)
- [ ] UI/UX refinements
- [ ] DocumentaÃ§Ã£o completa
- [ ] Testes E2E
```

## ğŸš¨ Red Flags - Pare e Planeje

Se a IA sugerir qualquer um destes, PARE e crie planejamento:

- **"Vamos implementar MCP"** â†’ Requer planejamento MCP
- **"Vamos adicionar RAG"** â†’ Requer planejamento RAG
- **"Vamos criar sistema de agentes"** â†’ Requer planejamento Companions
- **"Vamos fazer um marketplace"** â†’ Requer planejamento Marketplace
- **"Vamos integrar com [API complexa]"** â†’ Requer planejamento de integraÃ§Ã£o
- **"Vamos refatorar a arquitetura"** â†’ Requer planejamento arquitetural

## âœ… Exemplos de MudanÃ§as Simples (NÃ£o Requerem Planejamento)

- Adicionar novo componente UI simples
- Corrigir bug especÃ­fico
- Adicionar nova rota simples
- Modificar estilo CSS
- Adicionar validaÃ§Ã£o de formulÃ¡rio
- Atualizar texto ou traduÃ§Ã£o

## ğŸ¯ Templates por Tipo

### Nova IntegraÃ§Ã£o Externa
```markdown
## AnÃ¡lise da API/ServiÃ§o
- DocumentaÃ§Ã£o da API
- Rate limits e pricing
- AutenticaÃ§Ã£o e seguranÃ§a

## IntegraÃ§Ã£o Proposta
- PadrÃ£o de integraÃ§Ã£o (PADRAO_INTEGRACAO.md)
- Error handling especÃ­fico
- Caching strategy

## Impacto no Sistema
- MudanÃ§as no schema
- Novos endpoints necessÃ¡rios
- ModificaÃ§Ãµes em componentes
```

### Nova Funcionalidade UI
```markdown
## UX/UI Design
- Wireframes e mockups
- User journey mapping
- Responsive design

## Componentes NecessÃ¡rios
- Novos componentes a criar
- Componentes existentes a modificar
- DependÃªncias do shadcn/ui

## IntegraÃ§Ã£o com Backend
- APIs necessÃ¡rias
- Estrutura de dados
- Real-time requirements
```

### MudanÃ§a Arquitetural
```markdown
## Arquitetura Atual vs Proposta
- Diagrama do estado atual
- Diagrama da arquitetura proposta
- ComparaÃ§Ã£o de trade-offs

## MigraÃ§Ã£o
- EstratÃ©gia de migraÃ§Ã£o
- Downtime necessÃ¡rio
- Rollback plan

## Impacto em Performance
- Benchmarks atuais
- Performance esperada
- Pontos de monitoramento
```

## ğŸ“ˆ PriorizaÃ§Ã£o de Planejamentos

### Matriz de PriorizaÃ§Ã£o
```
Alto Impacto + Baixa Complexidade = ğŸŸ¢ Prioridade MÃ¡xima
Alto Impacto + Alta Complexidade  = ğŸŸ¡ Prioridade Alta  
Baixo Impacto + Baixa Complexidade = ğŸŸ¡ Prioridade MÃ©dia
Baixo Impacto + Alta Complexidade  = ğŸ”´ Prioridade Baixa
```

### CritÃ©rios de PriorizaÃ§Ã£o
1. **Impacto no negÃ³cio** - BenefÃ­cio direto para usuÃ¡rios
2. **DependÃªncias** - Outros planejamentos dependem desta mudanÃ§a
3. **Complexidade** - Risco tÃ©cnico e esforÃ§o necessÃ¡rio
4. **Recursos disponÃ­veis** - Capacidade da equipe
5. **Timeline** - UrgÃªncia e deadlines

## ğŸ› ï¸ Ferramentas de Planejamento

### Diagramas ObrigatÃ³rios
Para mudanÃ§as complexas, SEMPRE criar:
1. **Diagrama C4** - Contexto e containers
2. **Diagrama de fluxo** - Fluxo de dados
3. **Diagrama de sequÃªncia** - InteraÃ§Ãµes temporais
4. **Diagrama de componentes** - Estrutura interna

### ValidaÃ§Ã£o TÃ©cnica
```bash
# Scripts de validaÃ§Ã£o (quando aplicÃ¡vel)
npm run validate:architecture  # Validar arquitetura
npm run test:integration      # Testes de integraÃ§Ã£o
npm run benchmark:performance # Benchmark de performance
npm run analyze:dependencies  # AnÃ¡lise de dependÃªncias
```

## ğŸ“š DocumentaÃ§Ã£o de ReferÃªncia

### Planejamento
- `docs/arquitetura_geral/PLANEJAMENTO_EVOLUTIVO.md` - Processo completo
- `docs/planejamento/README.md` - Ãndice de planejamentos

### ImplementaÃ§Ã£o
- `docs/arquitetura_geral/PADRAO_INTEGRACAO.md` - PadrÃµes de integraÃ§Ã£o
- `docs/arquitetura_geral/CHECKLIST_INTEGRACAO.md` - Checklist de validaÃ§Ã£o
- `docs/arquitetura_geral/BOAS_PRATICAS_CODIGO.md` - PadrÃµes de cÃ³digo

## ğŸ¯ Workflow Recomendado

### Para MudanÃ§a Complexa
1. **Identificar complexidade** - Usar critÃ©rios acima
2. **Criar diretÃ³rio** - `docs/planejamento/[nome]/`
3. **AnÃ¡lise de impacto** - Documento completo
4. **Arquitetura proposta** - SoluÃ§Ã£o tÃ©cnica
5. **Diagramas** - VisualizaÃ§Ã£o da soluÃ§Ã£o
6. **Fases de implementaÃ§Ã£o** - Quebra em etapas
7. **ValidaÃ§Ã£o** - EstratÃ©gia de testes
8. **AprovaÃ§Ã£o** - Review antes de implementar
9. **ImplementaÃ§Ã£o** - Seguir fases planejadas
10. **Retrospectiva** - Aprender para prÃ³ximos planejamentos

### Para MudanÃ§a Simples
1. **Confirmar simplicidade** - NÃ£o atende critÃ©rios de complexidade
2. **Implementar diretamente** - Seguindo padrÃµes existentes
3. **Documentar se necessÃ¡rio** - Updates em documentaÃ§Ã£o existente

## âš ï¸ Lembre-se

**O objetivo nÃ£o Ã© burocratizar**, mas sim:
- **Evitar retrabalho** por decisÃµes arquiteturais ruins
- **Minimizar riscos** de mudanÃ§as complexas
- **Garantir qualidade** atravÃ©s de planejamento adequado
- **Facilitar manutenÃ§Ã£o** com arquitetura bem pensada
- **Acelerar desenvolvimento** futuro com base sÃ³lida

**Planejamento Ã© investimento, nÃ£o custo!**

