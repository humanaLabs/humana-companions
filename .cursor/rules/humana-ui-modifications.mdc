---
description: 
globs: 
alwaysApply: false
---
# Humana Companions - ModificaÃ§Ãµes de UI

## ğŸ“‹ VisÃ£o Geral
Esta regra define como fazer modificaÃ§Ãµes seguras na interface, evitando que a IA "estrague o cÃ³digo" ao alterar telas, menus, componentes ou controles.

## ğŸ¯ Estrutura de Componentes

### Mapa de LocalizaÃ§Ã£o
```
ğŸ“ components/
â”œâ”€â”€ ui/                      # shadcn/ui base components
â”‚   â”œâ”€â”€ button.tsx          # BotÃµes padronizados
â”‚   â”œâ”€â”€ input.tsx           # Inputs de formulÃ¡rio
â”‚   â”œâ”€â”€ select.tsx          # Dropdowns e seletores
â”‚   â””â”€â”€ sidebar.tsx         # Sidebar principal
â”œâ”€â”€ chat.tsx                # Interface principal de chat
â”œâ”€â”€ chat-header.tsx         # Header do chat
â”œâ”€â”€ sidebar-toggle.tsx      # Toggle da sidebar
â”œâ”€â”€ sidebar-history.tsx     # HistÃ³rico na sidebar
â”œâ”€â”€ model-selector.tsx      # Seletor de modelos IA
â”œâ”€â”€ dify-agent-selector.tsx # Seletor agentes Dify
â”œâ”€â”€ multimodal-input.tsx    # Input com anexos
â”œâ”€â”€ artifact.tsx            # Container de artifacts
â””â”€â”€ message.tsx             # Componente de mensagem
```

### Hierarquia de ModificaÃ§Ã£o
1. **components/ui/** - Base components (cuidado extremo)
2. **components/** - Specific components (modificaÃ§Ã£o segura)
3. **app/** - Pages e layouts (estrutura definida)

## ğŸš¨ Regras de SeguranÃ§a

### â›” NUNCA Modifique Diretamente:
- `components/ui/*` - SÃ£o componentes base do shadcn/ui
- `components/chat.tsx` - Componente complexo central
- `app/layout.tsx` - Layout principal da aplicaÃ§Ã£o
- `middleware.ts` - LÃ³gica de autenticaÃ§Ã£o

### âœ… SEMPRE FaÃ§a Antes de Modificar:
1. **Identifique o componente correto** usando o mapa acima
2. **Leia o arquivo completo** antes de fazer mudanÃ§as
3. **Entenda as props e dependÃªncias** existentes
4. **Preserve a estrutura** de classes CSS existente
5. **Teste a modificaÃ§Ã£o** em contexto

## ğŸ¨ PadrÃµes de ModificaÃ§Ã£o

### Adicionando Novo BotÃ£o
```typescript
// âœ… CORRETO - Use componente base
import { Button } from '@/components/ui/button';

// Adicione ao componente existente
<Button 
  variant="outline" 
  size="sm"
  onClick={handleAction}
  className="ml-2" // Use classes de espaÃ§amento
>
  Nova AÃ§Ã£o
</Button>
```

### Modificando Sidebar
```typescript
// âœ… CORRETO - Adicione item mantendo estrutura
<SidebarGroup>
  <SidebarGroupLabel>Nova SeÃ§Ã£o</SidebarGroupLabel>
  <SidebarGroupContent>
    <SidebarMenu>
      <SidebarMenuItem>
        <SidebarMenuButton asChild>
          <Link href="/nova-rota">
            <Icon />
            Nova Funcionalidade
          </Link>
        </SidebarMenuButton>
      </SidebarMenuItem>
    </SidebarMenu>
  </SidebarGroupContent>
</SidebarGroup>
```

### Adicionando Input Complexo
```typescript
// âœ… CORRETO - Use estrutura de formulÃ¡rio
<div className="space-y-4">
  <div className="space-y-2">
    <Label htmlFor="campo">RÃ³tulo do Campo</Label>
    <Input
      id="campo"
      type="text"
      placeholder="Placeholder descritivo"
      value={valor}
      onChange={(e) => setValor(e.target.value)}
      className="w-full"
    />
  </div>
</div>
```

## ğŸ­ Classes CSS Aprovadas

### Layout e EspaÃ§amento
```css
/* Containers */
.container, .max-w-*, .mx-auto

/* Spacing */
.p-*, .px-*, .py-*, .m-*, .mx-*, .my-*
.space-x-*, .space-y-*, .gap-*

/* Flexbox */
.flex, .inline-flex, .flex-col, .flex-row
.items-*, .justify-*, .self-*

/* Grid */
.grid, .grid-cols-*, .col-span-*
```

### Cores e Estados
```css
/* Background */
.bg-background, .bg-card, .bg-muted
.bg-primary, .bg-secondary, .bg-accent

/* Text */
.text-foreground, .text-muted-foreground
.text-primary, .text-secondary

/* Borders */
.border, .border-border, .border-input
.rounded-*, .shadow-*

/* States */
.hover:*, .focus:*, .active:*
.disabled:*, .data-[state=*]:*
```

### Responsividade
```css
/* Breakpoints */
.sm:*, .md:*, .lg:*, .xl:*, .2xl:*

/* Hide/Show */
.hidden, .block, .inline, .inline-block
.sm:hidden, .md:block, etc.
```

## ğŸ”§ Componentes EspecÃ­ficos

### Chat Interface
```typescript
// Estrutura do chat - NÃƒO MODIFIQUE diretamente
<div className="flex h-screen">
  <Sidebar /> {/* Sidebar principal */}
  <div className="flex-1 flex flex-col">
    <ChatHeader /> {/* Header fixo */}
    <Messages /> {/* Ãrea de mensagens */}
    <MultimodalInput /> {/* Input na parte inferior */}
  </div>
</div>
```

### Artifacts Container
```typescript
// Para modificar artifacts - USE esta estrutura
<div className="artifact-container border rounded-lg p-4">
  <div className="artifact-header flex items-center justify-between mb-4">
    <h3 className="font-semibold">{title}</h3>
    <ArtifactActions />
  </div>
  <div className="artifact-content">
    {/* ConteÃºdo especÃ­fico do tipo */}
  </div>
</div>
```

## ğŸ¯ Prompts Seguros para IA

### âœ… Prompt Correto
```
"Adicione um novo botÃ£o 'Exportar' ao componente ArtifactActions.
- Use o componente Button do shadcn/ui
- Posicione apÃ³s o botÃ£o 'Editar' existente  
- Use Ã­cone Download do lucide-react
- Mantenha as classes CSS existentes
- Preserve toda a funcionalidade atual"
```

### âŒ Prompt Perigoso
```
"Melhore a interface do chat"
"Reorganize os componentes"
"Atualize o design"
```

## ğŸš¨ Red Flags - Pare Imediatamente Se:

- IA sugerir remover `use client` ou `use server`
- IA quiser modificar imports de `@/components/ui/`
- IA sugerir alterar estrutura de pastas
- IA quiser mudar configuraÃ§Ã£o do Tailwind
- IA sugerir modificar `globals.css` drasticamente
- IA quiser alterar `components.json`

## ğŸ› ï¸ Debugging de UI

### Problemas Comuns
1. **Componente nÃ£o renderiza** â†’ Verifique imports
2. **Estilos nÃ£o aplicam** â†’ Verifique classes CSS
3. **Funcionalidade quebrada** â†’ Verifique props/handlers
4. **Layout quebrado** â†’ Verifique estrutura flex/grid

### Tools de Debug
```typescript
// Adicione temporariamente para debug
<div className="border-2 border-red-500"> {/* Visual debug */}
  {JSON.stringify(props, null, 2)} {/* Props debug */}
</div>
```

## ğŸ“‹ Checklist de ModificaÃ§Ã£o

Antes de aplicar qualquer mudanÃ§a de UI:

- [ ] Identifiquei o componente correto no mapa
- [ ] Li o arquivo completo do componente
- [ ] Entendi as props e dependÃªncias
- [ ] Verifiquei se nÃ£o Ã© um componente base (ui/)
- [ ] Planejei a modificaÃ§Ã£o mantendo estrutura
- [ ] Usei classes CSS aprovadas
- [ ] Preservei funcionalidade existente
- [ ] Testei em diferentes tamanhos de tela
- [ ] Verifiquei se nÃ£o quebrei outros componentes

## ğŸ¯ Exemplos de ModificaÃ§Ãµes Seguras

### 1. Adicionar Item ao Menu
```typescript
// Em sidebar-history.tsx - ADICIONE apÃ³s item existente
<SidebarMenuItem>
  <SidebarMenuButton asChild>
    <Link href="/nova-funcionalidade">
      <NewIcon />
      Nova Funcionalidade
    </Link>
  </SidebarMenuButton>
</SidebarMenuItem>
```

### 2. Novo Seletor de OpÃ§Ãµes
```typescript
// Crie novo componente seguindo padrÃ£o
export function NovoSeletor() {
  return (
    <Select value={valor} onValueChange={setValor}>
      <SelectTrigger className="w-full">
        <SelectValue placeholder="Selecione..." />
      </SelectTrigger>
      <SelectContent>
        {opcoes.map((opcao) => (
          <SelectItem key={opcao.id} value={opcao.id}>
            {opcao.nome}
          </SelectItem>
        ))}
      </SelectContent>
    </Select>
  );
}
```

### 3. Modal/Dialog Novo
```typescript
// Use componente base AlertDialog
<AlertDialog>
  <AlertDialogTrigger asChild>
    <Button variant="outline">Abrir Modal</Button>
  </AlertDialogTrigger>
  <AlertDialogContent>
    <AlertDialogHeader>
      <AlertDialogTitle>TÃ­tulo</AlertDialogTitle>
      <AlertDialogDescription>DescriÃ§Ã£o</AlertDialogDescription>
    </AlertDialogHeader>
    <AlertDialogFooter>
      <AlertDialogCancel>Cancelar</AlertDialogCancel>
      <AlertDialogAction>Confirmar</AlertDialogAction>
    </AlertDialogFooter>
  </AlertDialogContent>
</AlertDialog>
```

## ğŸ“š DocumentaÃ§Ã£o de ReferÃªncia

Para modificaÃ§Ãµes complexas, consulte:
- `docs/arquitetura_geral/GUIA_MODIFICACOES_UI.md` - Guia completo
- `docs/arquitetura_geral/REFERENCIA_RAPIDA_UI.md` - Consulta rÃ¡pida
- `docs/arquitetura_geral/REGRAS_INTERACAO_IA.md` - Como comunicar com IA

